(function(n){typeof define=="function"&&define.amd?define(["knockout"],n):n(ko)})(function(n){function r(n,t){return a(g(n),"preprocess",t)}function g(t){return typeof t=="object"?t:n.getBindingHandler(t)||(n.bindingHandlers[t]={})}function a(n,t,i){if(n[t]){var r=n[t];n[t]=function(n,t,u){return n=r.call(this,n,t,u),n?i.call(this,n,t,u):void 0}}else n[t]=i;return n}function s(t){var i=n.bindingProvider.instance,r;i.preprocessNode?(r=i.preprocessNode,i.preprocessNode=function(n){var i=r.call(this,n);return i||(i=t.call(this,n)),i}):i.preprocessNode=t}function nt(t,i){var r=n.getBindingHandler;n.getBindingHandler=function(n){var u;return r(n)||(u=n.match(t))&&i(u,n)}}function v(n){var t,f,r,u,e,i;if(n.indexOf("|")===-1)return n;if(t=n.match(/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'|\|\||[|:]|[^\s|:"'][^|:"']*[^\s|:"']|[^\s|:"']/g),t&&t.length>1)for(t.push("|"),n=t[0],r=!1,u=!1,e=1;i=t[e];++e)i==="|"?(r&&(f===":"&&(n+="undefined"),n+=")"),u=!0,r=!0):(u?n="ko.filters['"+i+"']("+n:r&&i===":"?(f===":"&&(n+="undefined"),n+=","):n+=i,u=!1),f=i;return n}function y(n){r(n,v)}function w(t,i,r){function f(r){u[r]&&(u[r]=function(u,f){function o(){var n={};return n[t]=f(),n}var e=Array.prototype.slice.call(arguments,0);return e[1]=o,n.bindingHandlers[i][r].apply(this,e)})}var u=n.utils.extend({},this);return f("init"),f("update"),u.preprocess&&(u.preprocess=null),n.virtualElements.allowedBindings[i]&&(n.virtualElements.allowedBindings[r]=!0),u}function h(t,i){var u=n.getBindingHandler(t),f;u&&(f=u.getNamespacedHandler||w,u.getNamespacedHandler=function(){return r(f.apply(this,arguments),i)})}function it(t,i,r){if(t.charAt(0)!=="{")return t;var u=n.expressionRewriting.parseObjectLiteral(t);n.utils.arrayForEach(u,function(n){r(i+p+n.key,n.value)})}function e(n){r(n,it)}function f(n){return/^([$_a-z][$\w]*|.+(\.\s*[$_a-z][$\w]*|\[.+\]))$/i.test(n)?"function(_x,_y,_z){return("+n+")(_x,_y,_z);}":n}function c(n){r(n,f)}function o(n,t,i){var r=g(n);r._propertyPreprocessors||(a(r,"preprocess",at),r._propertyPreprocessors={}),a(r._propertyPreprocessors,t,i)}function at(t,i,r){if(t.charAt(0)!=="{")return t;var e=n.expressionRewriting.parseObjectLiteral(t),u=[],f=this._propertyPreprocessors||{};return n.utils.arrayForEach(e,function(n){var t=n.key,i=n.value;f[t]&&(i=f[t](i,t,r)),i&&u.push("'"+t+"':"+i)}),"{"+u.join(",")+"}"}function b(n){return function(t){return"function("+n+"){return("+t+");}"}}function vt(n,t){var t=Array.prototype.slice.call(arguments,1).join();r(n,b(t))}function rt(n,t,i){function u(n){var r=n.match(/^([\s\S]*)}}([\s\S]*?)\{\{([\s\S]*)$/);r?(u(r[1]),t(r[2]),i(r[3])):i(n)}var r=n.match(/^([\s\S]*?)\{\{([\s\S]*)}}([\s\S]*)$/);r&&(t(r[1]),u(r[2]),t(r[3]))}function d(n){return n==null?"":n.trim?n.trim():n.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ut(n){var t;if(n.nodeType===3&&n.nodeValue&&n.nodeValue.indexOf("{{")!==-1&&(n.parentNode||{}).nodeName!="TEXTAREA"){t=[];function u(n){n&&t.push(document.createTextNode(n))}function f(i){i&&t.push.apply(t,ot.wrapExpression(i,n))}if(rt(n.nodeValue,u,f),t.length){if(n.parentNode){for(var i=0,e=t.length,r=n.parentNode;i<e;++i)r.insertBefore(t[i],n);r.removeChild(n)}return t}}}function yt(n,t){var e=t?t.ownerDocument:document,o=!0,i,r=n[0],s=n[n.length-1],u=[],f;return r==="#"?(s==="/"?i=n.slice(1,-1):(i=n.slice(1),o=!1),(f=i.match(/^([^,"'{}()\/:[\]\s]+)\s+([^\s:].*)/))&&(i=f[1]+":"+f[2])):r==="/"||(i=r==="{"&&s==="}"?"html:"+d(n.slice(1,-1)):"text:"+d(n)),i&&u.push(e.createComment("ko "+i)),o&&u.push(e.createComment("/ko")),u}function et(){s(ut)}function st(t){var u,i,f,r,o,s;if(t.nodeType===1&&t.attributes.length){u=t.getAttribute(l);for(var h=n.utils.arrayPushAll([],t.attributes),c=h.length,e=0;e<c;++e)if(i=h[e],i.specified&&i.name!=l&&i.value.indexOf("{{")!==-1){f=[],r="";function a(n){n&&f.push('"'+n.replace(/"/g,'\\"')+'"')}function v(n){n&&(r=n,f.push("ko.unwrap("+n+")"))}rt(i.value,a,v),f.length>1&&(r='""+'+f.join("+")),r&&(o=i.name.toLowerCase(),s=lt.attributeBinding(o,r,t)||ht(o,r,t),u?u+=","+s:u=s,t.setAttribute(l,u),t.removeAttribute(i.name))}}}function ht(t,i){return n.getBindingHandler(t)?t+":"+i:"attr."+t+":"+i}function ct(){s(st)}var u=n.unwrap,t=n.punches={utils:{addBindingPreprocessor:r,addNodePreprocessor:s,addBindingHandlerCreator:nt,setBindingPreprocessor:r,setNodePreprocessor:s}},i,tt,p,k,ft,ot,l,lt;return t.enableAll=function(){et(),ct(),e("attr"),e("css"),e("event"),e("style"),y("text"),y("html"),h("attr",v),c("click"),c("submit"),c("optionsAfterRender"),h("event",f),o("template","beforeRemove",f),o("template","afterAdd",f),o("template","afterRender",f)},i={},i.uppercase=function(n){return String.prototype.toUpperCase.call(u(n))},i.lowercase=function(n){return String.prototype.toLowerCase.call(u(n))},i["default"]=function(n,t){return(n=u(n),typeof n=="function")?n:typeof n=="string"?d(n)===""?t:n:n==null||n.length==0?t:n},i.replace=function(n,t,i){return String.prototype.replace.call(u(n),t,i)},i.fit=function(n,t,i,r){if(n=u(n),t&&(""+n).length>t){i=""+(i||"..."),t=t-i.length,n=""+n;switch(r){case"left":return i+n.slice(-t);case"middle":var f=Math.ceil(t/2);return n.substr(0,f)+i+n.slice(f-t);default:return n.substr(0,t)+i}}else return n},i.json=function(t,i,r){return n.toJSON(t,r,i)},i.number=function(n){return(+u(n)).toLocaleString()},n.filters=i,t.textFilter={preprocessor:v,enableForBinding:y},tt=/([^\.]+)\.(.+)/,p=".",nt(tt,function(t,i){var u=t[1],r=n.bindingHandlers[u];if(r){var e=t[2],o=r.getNamespacedHandler||w,f=o.call(r,e,u,i);return n.bindingHandlers[i]=f,f}}),t.namespacedBinding={defaultGetHandler:w,setDefaultBindingPreprocessor:h,addDefaultBindingPreprocessor:h,preprocessor:it,enableForBinding:e},t.wrappedCallback={preprocessor:f,enableForBinding:c},t.preprocessBindingProperty={setPreprocessor:o,addPreprocessor:o},k=b("$data,$event"),t.expressionCallback={makePreprocessor:b,eventPreprocessor:k,enableForBinding:vt},n.bindingHandlers.on={getNamespacedHandler:function(t){var i=n.getBindingHandler("event"+p+t);return r(i,k)}},n.virtualElements.allowedBindings.html||(ft=n.bindingHandlers.html.update,n.bindingHandlers.html.update=function(t,i){var r,f;t.nodeType===8?(r=u(i()),r!=null?(f=n.utils.parseHtmlFragment(""+r),n.virtualElements.setDomNodeChildren(t,f)):n.virtualElements.emptyNode(t)):ft(t,i)},n.virtualElements.allowedBindings.html=!0),ot=t.interpolationMarkup={preprocessor:ut,enable:et,wrapExpression:yt},l="data-bind",lt=t.attributeInterpolationMarkup={preprocessor:st,enable:ct,attributeBinding:ht},t});
//# sourceMappingURL=knockout.punches.min.js.map